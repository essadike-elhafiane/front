(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{990:function(e,a,s){Promise.resolve().then(s.bind(s,5253))},7760:function(e,a,s){"use strict";s.d(a,{c:function(){return n}});var r=s(3827);s(7841),s(4965);var t=s(703);let n=()=>(0,r.jsx)("div",{className:"containerLoding",children:(0,r.jsx)(t.default,{className:"lodingImg",src:"./Vector.svg",alt:"logo",width:50,height:50})})},5253:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var r=s(3827);s(7841);var t=s(4090),n=s(7908),o=s(7907),i=s(7760);let l=t.createContext(null);var d=s(703),u=s(8693),m=s(1991);let c={Email:"",FirstName:"",LastName:""},h={userName:"",Password:"","Confirm Password":""},p=m.Ry().shape({LastName:m.Z_().transform(e=>e.trim()).min(2,"Too Short!").max(20,"Too Long!").required("Required"),FirstName:m.Z_().transform(e=>e.trim()).min(2,"Too Short!").max(20,"Too Long!").required("Required"),Email:m.Z_().email("Invalid email").required("Required")}),N=m.Ry().shape({userName:m.Z_().transform(e=>e.trim()).min(4,"Too Short!").max(20,"Too Long!").required("Required").matches(/^[a-zA-Z0-9-_]+$/,"No spaces or special characters allowed"),Password:m.Z_().min(6,"Too Short!").max(50,"Too Long!").matches(/[a-z]/,"Needs a lowercase letter").matches(/[A-Z]/,"Needs a uppercase letter").matches(/[0-9]/,"Needs a number").required("Required"),"Confirm Password":m.Z_().oneOf([m.iH("Password")],"Passwords must match").required("Required")});function g(){let e=(0,t.useContext)(l);(0,o.useRouter)();let a=async a=>{try{var r,t,o;let s=await n.Z.post("https://trans-ctzn.onrender.com/signup",{firstName:a.FirstName,email:a.Email,lastName:a.LastName,password:void 0},{withCredentials:!0});if(!s)throw Error("Error");console.log("data:  ",s.data,null==s?void 0:null===(r=s.data)||void 0===r?void 0:r.userName),null==e||e.setUser({userName:(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.userName)||"",image:(null==s?void 0:null===(o=s.data)||void 0===o?void 0:o.image)||""}),null==e||e.setNeedUpdate(!0)}catch(e){console.log(e),s.setErrors({Email:"Email is already used or invalide"})}},s=(0,u.TA)({initialValues:c,validationSchema:p,onSubmit:a});return(0,r.jsxs)("form",{onSubmit:s.handleSubmit,className:"input-container",children:[(0,r.jsx)("input",{value:s.values.FirstName,onChange:s.handleChange,name:"FirstName",className:"input ".concat(s.errors.FirstName&&s.touched.FirstName?"InputError":""),placeholder:"First name",type:"text",autoComplete:"yes",onBlur:s.handleBlur},"FirstName"),s.errors.FirstName&&s.touched.FirstName?(0,r.jsx)("p",{className:"ErrorMessage",children:s.errors.FirstName}):"",(0,r.jsx)("input",{onChange:s.handleChange,value:s.values.LastName,name:"LastName",className:"input ".concat(s.errors.LastName&&s.touched.LastName?"InputError":""),placeholder:"Last name",type:"text",autoComplete:"yes",onBlur:s.handleBlur},"LastName"),s.errors.LastName&&s.touched.LastName?(0,r.jsx)("p",{className:"ErrorMessage",children:s.errors.LastName}):"",(0,r.jsx)("input",{value:s.values.Email,onChange:s.handleChange,name:"Email",className:"input ".concat(s.errors.Email&&s.touched.Email?"InputError":""),placeholder:"Email",type:"email",autoComplete:"yes",onBlur:s.handleBlur},"Email"),s.errors.Email&&s.touched.Email?(0,r.jsx)("p",{className:"ErrorMessage",children:s.errors.Email}):"",(0,r.jsx)("button",{id:"singbtn",type:"submit",children:"Sign up"})]})}function v(){let[e,a]=(0,t.useState)(!1),s=(0,t.useRef)(null),i=(0,t.useContext)(l),d=(0,o.useRouter)();return(0,t.useEffect)(()=>{if(s.current){var e;null===(e=s.current)||void 0===e||e.focus()}},[]),(0,r.jsxs)("form",{className:"input-container",onSubmit:function(e){e.preventDefault(),(async()=>{let e={userName:document.getElementsByName("Email or UserName")[0].value,email:document.getElementsByName("Email or UserName")[0].value,password:document.getElementsByName("Password")[0].value};try{let s=await n.Z.post("https://trans-ctzn.onrender.com/signin",JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0});console.log(s.data);let r=s.data;void 0===r.login||!1===r.login||null===r.login?a(!0):(!1===r.update?null==i||i.setNeedUpdate(!0):d.push("/"),null==i||i.setUser(s.data))}catch(e){a(!0)}})()},children:[(0,r.jsx)("input",{ref:s,name:"Email or UserName",type:"text",className:"input ".concat(e?"InputError":""),placeholder:"Email or UserName"}),(0,r.jsx)("input",{name:"Password",type:"password",autoComplete:"none",className:"input ".concat(e?"InputError":""),placeholder:"Password"}),e&&(0,r.jsx)("p",{className:"ErrorMessage",children:"Invalid userName or password"}),(0,r.jsx)("button",{type:"submit",id:"singbtn",children:"Sign in"})]})}s(3385);var x=()=>{let e=(0,o.useRouter)(),[a,s]=(0,t.useState)(!0);return(0,r.jsx)("div",{className:"main_1",children:(0,r.jsxs)("div",{className:"Container",children:[(0,r.jsxs)("div",{className:"row_0",children:[(0,r.jsxs)("div",{className:"flex items-center pt-8 w-50 logoContainer",children:[(0,r.jsx)(d.default,{className:"logoImg",src:"./Vector.svg",alt:"logo",width:50,height:50,priority:!0}),(0,r.jsxs)("h1",{className:"logoName",children:["P",(0,r.jsx)("span",{children:"O"}),"NGy"]})]}),(0,r.jsxs)("div",{id:"loginBtn",children:[(0,r.jsx)("a",{href:"#",className:"".concat(a?"inactive_sing":"active_sing"),onClick:()=>{s(!1)},children:"Sign up"}),(0,r.jsx)("a",{href:"#",className:"".concat(a?"active_sing":"inactive_sing"),onClick:()=>{s(!0)},children:"Login"}),(0,r.jsx)("div",{children:a?(0,r.jsx)(v,{}):(0,r.jsx)(g,{})})]})]}),(0,r.jsx)("div",{className:"row1",children:(0,r.jsxs)("div",{id:"div-row1",children:[(0,r.jsxs)("div",{className:"btnAuth",onClick:()=>{e.push("https://trans-ctzn.onrender.com/api/auth/intra")},children:[(0,r.jsx)(d.default,{src:"./IntraLogo.svg",alt:"",width:"100",height:"100",style:{maxWidth:"100%",height:"auto"}}),(0,r.jsx)("span",{children:"Intra"})]}),(0,r.jsxs)("div",{className:"btnAuth",onClick:()=>{e.push("https://trans-ctzn.onrender.com/api/auth/google")},children:[(0,r.jsx)(d.default,{src:"./GoogleLogo.svg",alt:"",width:"100",height:"100",style:{maxWidth:"100%",height:"auto"}}),(0,r.jsx)("span",{children:"Google"})]})]})})]})})};s(3430);var f=e=>{let a=e.file,s=t.useContext(l),i=null==s?void 0:s.userName;i&&(h.userName=i),console.log("file: ",a);let d=(0,o.useRouter)(),m=async e=>{console.log("values: ",e);try{let r=new FormData;a?r.append("file",a):r.append("image",(null==s?void 0:s.image)||"./defaultImg.svg"),r.append("userName",e.userName),r.append("Password",e.Password),await n.Z.put("https://trans-ctzn.onrender.com/update",r,{headers:{Accept:"form-data"},withCredentials:!0})&&d.push("/")}catch(e){console.error("Error:",e),c.setErrors({userName:"userName is already used"})}},c=(0,u.TA)({initialValues:h,validationSchema:N,onSubmit:()=>{m(c.values)}});return(0,r.jsxs)("form",{onSubmit:c.handleSubmit,className:"input-container",children:[(0,r.jsx)("input",{value:c.values.userName,onChange:c.handleChange,name:"userName",className:"input ".concat(c.errors.userName&&c.touched.userName?"InputError":""),placeholder:i?"".concat("userName : "+i):"Username",type:"text",autoComplete:"yes",onBlur:c.handleBlur},"userName"),c.errors.userName&&c.touched.userName?(0,r.jsx)("p",{className:"ErrorMessage",children:c.errors.userName}):"",(0,r.jsx)("input",{value:c.values.Password,onChange:c.handleChange,name:"Password",className:"input ".concat(c.errors.Password&&c.touched.Password?"InputError":""),placeholder:"Password",type:"password",autoComplete:"none",onBlur:c.handleBlur},"Password"),c.errors.Password&&c.touched.Password?(0,r.jsx)("p",{className:"ErrorMessage",children:c.errors.Password}):"",(0,r.jsx)("input",{value:c.values["Confirm Password"],onChange:c.handleChange,name:"Confirm Password",className:"input ".concat(c.errors["Confirm Password"]&&c.touched["Confirm Password"]?"InputError":""),placeholder:"Confirm Password",type:"password",autoComplete:"none",onBlur:c.handleBlur},"Confirm Password"),c.errors["Confirm Password"]&&c.touched["Confirm Password"]?(0,r.jsx)("p",{className:"ErrorMessage",children:c.errors["Confirm Password"]}):"",(0,r.jsx)("button",{id:"singbtn",type:"submit",children:"Confirm"})]})},j=()=>{let e=(0,t.useContext)(l),[a,s]=(0,t.useState)((null==e?void 0:e.image)?e.image:"./defaultImg.svg"),[n,o]=(0,t.useState)(null);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("main",{className:"main_1",children:(0,r.jsxs)("div",{className:"update-container",children:[(0,r.jsxs)("div",{className:"flex items-center pt-8 w-50 logoContainer marginLeft",children:[(0,r.jsx)(d.default,{className:"logoImg",src:"./Vector.svg",alt:"logo",width:50,height:50,priority:!0,style:{height:"auto",width:"auto",maxWidth:"100%"}}),(0,r.jsxs)("h1",{className:"logoName",children:["P",(0,r.jsx)("span",{children:"O"}),"NGy"]})]}),(0,r.jsx)("h1",{id:"Laststeps",children:"Last steps"}),(0,r.jsxs)("div",{className:"update-row",children:[(0,r.jsx)(f,{file:n}),(0,r.jsxs)("div",{className:"update-row-image",children:[(0,r.jsx)(d.default,{className:"UpdatedPhoto",src:a,alt:"Pongy",style:{borderRadius:"50%",objectFit:"cover"},width:100,height:100,priority:!0}),(0,r.jsx)(d.default,{className:"updateLogo",src:"./update.svg",alt:"upload",width:10,height:10,priority:!0}),(0,r.jsx)("input",{type:"file",id:"ImageInput",onChange:e=>{var a,r;let t=null==e?void 0:null===(r=e.target)||void 0===r?void 0:null===(a=r.files)||void 0===a?void 0:a[0];s(t?URL.createObjectURL(t):"./defaultImg.svg"),o(t||null)},style:{display:"none"}}),(0,r.jsx)("label",{htmlFor:"ImageInput",className:"update-botton",children:"Update"})]})]})]})})})},w=function(){let e=(0,o.useRouter)(),[a,s]=(0,t.useState)(!0),[d,u]=(0,t.useState)({userName:"",image:""}),[m,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{let a=await n.Z.get("https://trans-ctzn.onrender.com/profile",{headers:{"Content-Type":"application/json"},withCredentials:!0});a.data&&void 0!==a.data.update?!0===a.data.update?e.push("/"):(u(a.data),c(!0)):s(!1)}catch(e){s(!1)}})()},[]);let h={userName:null==d?void 0:d.userName,image:null==d?void 0:d.image,setNeedUpdate:c,setUser:u};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Provider,{value:h,children:m?(0,r.jsx)(j,{}):a?(0,r.jsx)(i.c,{}):(0,r.jsx)(x,{})})})}},3385:function(){},4965:function(){},7841:function(){},3430:function(){}},function(e){e.O(0,[749,203,831,64,971,69,744],function(){return e(e.s=990)}),_N_E=e.O()}]);